---
id: 383
title: Dynamic Lighting in OpenGL using GLUT
date: 2011-11-23T23:30:35-04:00
author: brad
layout: post
guid: http://br4d.net/?p=383
permalink: /dynamic-lighting-in-opengl-using-glut/
categories:
  - C / C++
  - OpenGL / WebGL
  - Programming
---
<div class="pull-left" style="padding:`0px;">
  <a href="http://br4d.net/wp-content/uploads/2015/01/dynamiclighting.png"><img src="http://br4d.net/wp-content/uploads/2015/01/dynamiclighting.png" alt="dynamiclighting" width="218" height="183" class="alignnone size-full wp-image-384" /></a>
</div>

This is a simple program to show dynamic lighting. The heavy lifting is done in the shadePolygons() function which determines the luminosity of the surface of the cube according to the angle.  
<!--more-->

<div class="codecolorer-container cpp default" style="overflow:auto;white-space:nowrap;height:300px;">
  <div class="cpp codecolorer">
    <span class="co2">#include "stdafx.h"</span><br /> <span class="co2">#include <stdio.h></span><br /> <span class="co2">#include <stdlib.h></span><br /> <span class="co2">#include <math.h></span><br /> <span class="co2">#include "GL/glut.h"</span><br /> &nbsp;<br /> <span class="kw4">void</span> init<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="kw4">void</span> display<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="kw4">void</span> myIdle<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc, <span class="kw4">char</span><span class="sy2">**</span> argv<span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="kw4">void</span> shadePolygons<span class="br0">&#40;</span><span class="kw4">double</span> x<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> y<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> z<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> kr, <span class="kw4">double</span> kg, <span class="kw4">double</span> kb<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> <span class="kw4">float</span> xNear <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">3</span>, xFar <span class="sy1">=</span> <span class="nu0">3</span>, yNear <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">3</span>, yFar <span class="sy1">=</span> <span class="nu0">3</span>, zNear <span class="sy1">=</span> <span class="nu0">3</span>, zFar <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">3</span><span class="sy4">;</span><br /> <span class="kw4">double</span> lightPos<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="sy2">-</span><span class="nu0">60</span>, <span class="nu0">10</span>, <span class="nu0">20</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> <span class="kw4">double</span> Id <span class="sy1">=</span> <span class="nu16">4.0</span><span class="sy4">;</span><br /> <span class="kw4">double</span> Ia <span class="sy1">=</span> <span class="nu16">1.0</span><span class="sy4">;</span><br /> <span class="kw4">int</span> direction <span class="sy1">=</span> <span class="nu0">1</span><span class="sy4">;</span><br /> &nbsp;<br /> <span class="kw4">void</span> shadePolygons<span class="br0">&#40;</span><span class="kw4">double</span> x<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> y<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> z<span class="br0">&#91;</span><span class="br0">&#93;</span>, <span class="kw4">double</span> kr, <span class="kw4">double</span> kg, <span class="kw4">double</span> kb<span class="br0">&#41;</span><br /> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> vx <span class="sy1">=</span> x<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy2">-</span> x<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> vy <span class="sy1">=</span> y<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy2">-</span> y<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> vz <span class="sy1">=</span> z<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy2">-</span> z<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">float</span> wx <span class="sy1">=</span> x<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy2">-</span> x<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> wy <span class="sy1">=</span> y<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy2">-</span> y<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> wz <span class="sy1">=</span> z<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy2">-</span> z<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">float</span> Nx <span class="sy1">=</span> vy<span class="sy2">*</span>wz<span class="sy2">-</span>vz<span class="sy2">*</span>wy<span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> Ny <span class="sy1">=</span> vx<span class="sy2">*</span>wz<span class="sy2">-</span>vz<span class="sy2">*</span>wx<span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> Nz <span class="sy1">=</span> vx<span class="sy2">*</span>wy<span class="sy2">-</span>vy<span class="sy2">*</span>wx<span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">float</span> Lx <span class="sy1">=</span> lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span> <span class="sy2">-</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>x<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy2">+</span>x<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy2">/</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> Ly <span class="sy1">=</span> lightPos<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy2">-</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>y<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy2">+</span>y<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy2">/</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> Lz <span class="sy1">=</span> lightPos<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy2">-</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>z<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy2">+</span>z<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy2">/</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">float</span> LdotN <span class="sy1">=</span> <span class="br0">&#40;</span>Lx<span class="sy2">*</span>Nx<span class="br0">&#41;</span><span class="sy2">+</span><span class="br0">&#40;</span>Ly<span class="sy2">*</span>Ny<span class="br0">&#41;</span><span class="sy2">+</span><span class="br0">&#40;</span>Lz<span class="sy2">*</span>Nz<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> normL <span class="sy1">=</span> <span class="kw3">sqrt</span><span class="br0">&#40;</span>Lx<span class="sy2">*</span>Lx <span class="sy2">+</span> Ly<span class="sy2">*</span>Ly <span class="sy2">+</span> Lz<span class="sy2">*</span>Lz<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">float</span> normN <span class="sy1">=</span> <span class="kw3">sqrt</span><span class="br0">&#40;</span>Nx<span class="sy2">*</span>Nx <span class="sy2">+</span> Ny<span class="sy2">*</span>Ny <span class="sy2">+</span> Nz<span class="sy2">*</span>Nz<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">float</span> lightAmt <span class="sy1">=</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span>LdotN<span class="sy2">*</span>Id<span class="br0">&#41;</span><span class="sy2">/</span><span class="br0">&#40;</span>normL<span class="sy2">*</span>normN<span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; lightAmt <span class="sy1">=</span> lightAmt <span class="sy2">+</span> Ia<span class="sy4">;</span><br /> &nbsp; &nbsp; lightAmt <span class="sy1">=</span> lightAmt <span class="sy2">/</span> <span class="br0">&#40;</span>Ia<span class="sy2">+</span>Id<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glColor3f<span class="br0">&#40;</span>kr<span class="sy2">*</span>lightAmt, kg<span class="sy2">*</span>lightAmt, kb<span class="sy2">*</span>lightAmt<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glBegin<span class="br0">&#40;</span>GL_POLYGON<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; glVertex3f<span class="br0">&#40;</span>x<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span>, y<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span>, z<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; glVertex3f<span class="br0">&#40;</span>x<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>, y<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>, z<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; glVertex3f<span class="br0">&#40;</span>x<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>, y<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>, z<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; glVertex3f<span class="br0">&#40;</span>x<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span>, y<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span>, z<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glEnd<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="br0">&#125;</span><br /> &nbsp;<br /> <span class="kw4">void</span> init<span class="br0">&#40;</span><span class="br0">&#41;</span><br /> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; glClearColor<span class="br0">&#40;</span><span class="nu0"></span>, <span class="nu0"></span>, <span class="nu0"></span>, <span class="nu0"></span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glMatrixMode<span class="br0">&#40;</span>GL_PROJECTION<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glOrtho<span class="br0">&#40;</span>xNear, xFar, yNear, yFar, zNear, zFar<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glRotatef<span class="br0">&#40;</span><span class="nu0">30</span>, <span class="sy2">-</span><span class="nu0">1</span>, <span class="nu0">1</span>, <span class="nu0"></span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="br0">&#125;</span><br /> &nbsp;<br /> <span class="kw4">void</span> display<span class="br0">&#40;</span><span class="br0">&#41;</span><br /> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; glClear<span class="br0">&#40;</span>GL_COLOR_BUFFER_BIT<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glMatrixMode<span class="br0">&#40;</span>GL_MODELVIEW<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glColor3f<span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">char</span> title<span class="br0">&#91;</span><span class="nu0">15</span><span class="br0">&#93;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw3">sprintf</span><span class="br0">&#40;</span>title,<span class="st0">"%f"</span>, lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutSetWindowTitle<span class="br0">&#40;</span>title<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">double</span> face1x<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face1y<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face1z<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; shadePolygons<span class="br0">&#40;</span>face1x,face1y,face1z,<span class="nu0">1</span>,<span class="nu0"></span>,<span class="nu0"></span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">double</span> face2x<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face2y<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face2z<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; shadePolygons<span class="br0">&#40;</span>face2x,face2y,face2z,<span class="nu0"></span>,<span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">double</span> face3x<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face3y<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face3z<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="nu0"></span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; shadePolygons<span class="br0">&#40;</span>face3x,face3y,face3z,<span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">double</span> face4x<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face4y<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu16">1.5</span>,<span class="sy2">-</span><span class="nu16">1.5</span>,<span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face4z<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu16">1.5</span>,<span class="sy2">-</span><span class="nu16">1.5</span>,<span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; shadePolygons<span class="br0">&#40;</span>face4x,face4y,face4z,<span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp;<br /> &nbsp; &nbsp; <span class="kw4">double</span> face5x<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">2</span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face5y<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="sy2">-</span><span class="nu0">1</span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> face5z<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy1">=</span> <span class="br0">&#123;</span><span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0"></span><span class="br0">&#125;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; shadePolygons<span class="br0">&#40;</span>face5x,face5y,face5z,<span class="nu0"></span>,<span class="nu0"></span>,<span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutSwapBuffers<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="br0">&#125;</span><br /> &nbsp;<br /> <span class="kw4">void</span> myIdle<span class="br0">&#40;</span><span class="br0">&#41;</span><br /> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span> <span class="sy1">=</span> lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span><span class="sy2">+</span>direction<span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span> <span class="sy1">>=</span> <span class="nu0">60</span><span class="br0">&#41;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; direction <span class="sy1">=</span> direction<span class="sy2">*</span><span class="br0">&#40;</span><span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw1">if</span><span class="br0">&#40;</span>lightPos<span class="br0">&#91;</span><span class="nu0"></span><span class="br0">&#93;</span> <span class="sy1"><=</span> <span class="sy2">-</span><span class="nu0">60</span><span class="br0">&#41;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; direction <span class="sy1">=</span> direction<span class="sy2">*</span><span class="br0">&#40;</span><span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw4">double</span> zzz<span class="sy1">=</span><span class="nu0"></span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0"></span><span class="sy4">;</span> i<span class="sy1"><</span><span class="nu0">2000000</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">&#41;</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; zzz <span class="sy1">=</span> <span class="kw3">sqrt</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>i<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutPostRedisplay<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> <span class="br0">&#125;</span><br /> &nbsp;<br /> <span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc, <span class="kw4">char</span><span class="sy2">**</span> argv<span class="br0">&#41;</span><br /> <span class="br0">&#123;</span><br /> &nbsp; &nbsp; glutInit<span class="br0">&#40;</span><span class="sy3">&</span>argc,argv<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutInitDisplayMode<span class="br0">&#40;</span>GLUT_DOUBLE<span class="sy3">|</span>GLUT_RGB<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutInitWindowSize<span class="br0">&#40;</span><span class="nu0">400</span>,<span class="nu0">400</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutInitWindowPosition<span class="br0">&#40;</span><span class="nu0">20</span>,<span class="nu0">20</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutCreateWindow<span class="br0">&#40;</span><span class="st0">"Shader Lab"</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutDisplayFunc<span class="br0">&#40;</span>display<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutIdleFunc<span class="br0">&#40;</span>myIdle<span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; init<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; glutMainLoop<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span><br /> &nbsp; &nbsp; <span class="kw1">return</span> <span class="nu0"></span><span class="sy4">;</span><br /> <span class="br0">&#125;</span>
  </div>
</div>